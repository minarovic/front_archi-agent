{
  "timestamp": "2025-11-03T19:33:08.073668",
  "business_context": {
    "entities": [
      "Suppliers (dodavatelé)",
      "Purchase Orders (nákupní objednávky)",
      "Products (produkty)",
      "Delivery Performance (výkonnost dodávek)"
    ],
    "scope_out": "unknown",
    "timestamp": "2025-11-01T00:23:16.039969"
  },
  "facts": [
    {
      "table_id": "factv_purchase_order",
      "table_name": "Systems>dap_gold_prod>dm_bs_purchase>factv_purchase_order",
      "grain": "Purchase order (header) level; one row per purchase order",
      "measures": [
        "order_total_amount",
        "order_net_amount",
        "order_tax_amount",
        "order_line_count",
        "order_quantity"
      ],
      "date_columns": [
        "order_date",
        "delivery_expected_date",
        "order_created_ts"
      ],
      "confidence": 0.95,
      "rationale": "Purchase Orders are transactional by nature and map to a fact table. Naming convention (factv_) and the candidate mapping to dm_bs_purchase with high confidence (0.98) support classification. Measures listed are typical aggregatable fields found at the order header grain; date columns identify the transactional time dimensions."
    },
    {
      "table_id": "factv_delivery_performance",
      "table_name": "Systems>dap_gold_prod>dm_bs_purchase>factv_delivery_performance",
      "grain": "Delivery performance at shipment/delivery event level (or daily performance snapshot by supplier/product)",
      "measures": [
        "shipment_count",
        "on_time_shipments_count",
        "late_shipments_count",
        "avg_delivery_delay_minutes",
        "on_time_rate"
      ],
      "date_columns": [
        "delivery_date",
        "performance_period_date",
        "measurement_ts"
      ],
      "confidence": 0.6,
      "rationale": "Delivery Performance describes measured metrics (counts, averages, rates) and is therefore best modeled as a fact table. Candidate mapping confidence was lower (0.62) and the exact grain (per shipment vs. aggregated snapshot) may vary, so confidence is moderate. Measures and date fields reflect typical performance metrics and their timestamps."
    }
  ],
  "dimensions": [
    {
      "table_id": "dimv_supplier",
      "table_name": "Systems>dap_gold_prod>dm_bs_purchase>dimv_supplier",
      "business_key": "supplier_id",
      "attributes": [
        "supplier_name",
        "supplier_code",
        "supplier_country",
        "supplier_region",
        "supplier_type",
        "supplier_status",
        "contact_name",
        "contact_email",
        "supplier_rating"
      ],
      "confidence": 0.9,
      "rationale": "Suppliers are descriptive master data and fit a dimension table pattern (dimv_). The tool candidate mapped Suppliers to dm_bs_purchase with high confidence (0.95). Typical attributes and a clear business key (supplier_id) are provided."
    },
    {
      "table_id": "dimv_product",
      "table_name": "Systems>dap_gold_prod>dm_bs_purchase>dimv_product",
      "business_key": "product_id",
      "attributes": [
        "product_sku",
        "product_name",
        "product_description",
        "product_category",
        "brand",
        "unit_of_measure",
        "standard_cost",
        "list_price",
        "product_weight",
        "product_status"
      ],
      "confidence": 0.85,
      "rationale": "Products are master/descriptive data and should be a dimension (dimv_). The candidate mapping confidence was 0.85. Typical product attributes and a business key (product_id or SKU) are listed. If the underlying model stores price history, a slowly changing dimension pattern may apply."
    }
  ],
  "hierarchies": [
    {
      "parent_table": "dimv_material_group",
      "child_table": "dimv_material",
      "relationship_type": "1:N",
      "confidence": 0.88,
      "rationale": "Hierarcy Relation field present (note typo in metadata!), parent-child pattern in descriptions"
    }
  ],
  "relationships": [
    {
      "from_table": "factv_purchase_order_item",
      "to_table": "dimv_supplier",
      "join_column": "supplier_id",
      "relationship_type": "FK",
      "confidence": 0.9,
      "rationale": "Column name 'supplier_id' matches dimension table 'dimv_supplier', suffix '_id'"
    }
  ],
  "metrics": {
    "total_facts": 2,
    "total_dimensions": 2,
    "total_hierarchies": 1,
    "total_relationships": 1,
    "coverage": 1.0,
    "unresolved_entities": [
      "Purchase Orders (nákupní objednávky)",
      "Products (produkty)",
      "Delivery Performance (výkonnost dodávek)",
      "Suppliers (dodavatelé)"
    ]
  }
}